<html>
  <head></head>
  <body>
    <div id="simmons"></div>
	
	<script src="libs/Box2dWeb-2.1.a.3.js"></script>  
	<script src="libs/crafty.js"></script>
	<script src="libs/box2d.js"></script>
	
    <script>
		var world,
			PTM_RATIO = 1,
			canvas_w = 1000,			// 背景宽
			canvas_h = canvas_w,		// 背景高
			circle_r = (canvas_w / 2),	// 圆心距离顶部的高度
			circle_h = circle_r			// 半径
			;
			
		window.onload = function () {
			gameInit();
		};

		gameInit = function(){
			//start crafty
			Crafty.init(canvas_w, canvas_h);
			Crafty.canvas.init();
			//Init the box2d world, gx = 0, gy = 10
			Crafty.box2D.init(0,0, PTM_RATIO, true);
			world = Crafty.box2D.world;
			//Start the Box2D debugger
			Crafty.box2D.showDebugInfo();  
			
			Crafty.scene("main", function () {				
				generateWorld();     
			});
			
			Crafty.scene("main");
		}

		generateWorld = function() {	
			genterateChars();	
		}

		genterateChars = function(){	 
				var fallingElement =  Crafty.e("2D, Canvas, Color, Box2D")
											.origin("center")
											.color("#ffffff")	// Canvas颜色
											.attr({ 
												x: 0, 
												y: 0, 
												h: circle_h,	// 中心距离顶部的高度
												w: circle_r 	// 半径
											})
											.box2d({					// 在Box2D中，无法设置填充刚体所用的颜色，默认有三中颜色来填充刚体，即红色（表示正在移动的刚体），绿色（表示静止的刚体，没有密度质量的刚体），灰色（表示已经处于休眠状态的刚体）。
													bodyType: 'static', // static:固定 dynamic:掉落下来
													density : 1.0,
													friction : 2,
													restitution : 0.2,
													shape: "circle"		// Box2D是无法创建空心球体的，只能通过多边形来近似模拟空心圆
											});	
		}
					
    </script>
  </body>
</html>